<!DOCTYPE html>
<html lang="zh-Hant"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{dashboardLayout}">
<head>
    <meta charset="UTF-8">
    <title>Flashcard 管理</title>
</head>
<body>
<section layout:fragment="content">
    <div class="max-w-4xl mx-auto py-8">
        <h1 class="text-3xl font-bold mb-6 text-primary">Flashcard 管理</h1>

        <!-- 新增 Flashcard 連結 -->
        <div class="mb-6">
            <a th:href="@{/flashcards/add}"
               class="bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90">
                新增 Flashcard
            </a>
        </div>

        <!-- Flashcard 列表 -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold mb-4">Flashcard 列表</h2>
            <table class="w-full table-auto">
                <thead>
                <tr class="text-left border-b">
                    <!-- 移除 ID 欄 -->
                    <th class="py-2">分類</th>
                    <th class="py-2">月齡</th>
                    <th class="py-2">標題</th>
                    <th class="py-2">內文</th>
                    <th class="py-2">圖片</th>
                    <th class="py-2">操作</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="flashcard : ${flashcards}" class="border-b">
                    <!-- Category：顯示繁體中文名稱 -->
                    <td class="py-2"
                        th:text="${flashcard.category.name[T(com.dean.baby.common.dto.enums.Language).TRADITIONAL_CHINESE]}">
                    </td>

                    <!-- Milestone -->
                    <td th:text="${flashcard.milestone.id}" class="py-2"></td>

                    <!-- Front Text -->
                    <td th:text="${flashcard.translations[0].frontText}" class="py-2"></td>

                    <!-- Back Text -->
                    <td th:text="${flashcard.translations[0].backText}" class="py-2"></td>

                    <!-- Image -->
                    <td class="py-2">
                        <img th:if="${flashcard.translations[0].imageUrl != null}"
                             th:src="${flashcard.translations[0].imageUrl}"
                             alt="Flashcard Image"
                             class="w-16 h-16 object-cover rounded">
                        <span th:if="${flashcard.translations[0].imageUrl == null}"
                              class="text-gray-400">無圖片</span>
                    </td>

                    <!-- Actions -->
                    <td class="py-2">
                        <div class="flex space-x-2">
                            <!-- Edit Button -->
                            <a th:href="@{'/flashcard/edit/' + ${flashcard.id}}"
                               class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">
                                編輯
                            </a>

                            <!-- Video Management Button -->
                            <a th:href="@{'/flashcard/' + ${flashcard.id} + '/videos'}"
                               class="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600">
                                Videos
                            </a>

                            <!-- Delete Button -->
                            <form th:action="@{'/flashcard/delete/' + ${flashcard.id}}" method="post" class="inline">
                                <button type="submit"
                                        class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600"
                                        onclick="return confirm('確定要刪除此 Flashcard 嗎？')">
                                    刪除
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>
</body>
</html>
